services:
  - type: web
    name: product-scraper-api
    env: python
    buildCommand: |
      pip install -r requirements.txt
      python -m playwright install
      python manage.py makemigrations
      python manage.py migrate
      python manage.py collectstatic --noinput
    startCommand: gunicorn scraper.wsgi:application
    envVars:
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: DJANGO_SETTINGS_MODULE
        value: scraper.settings
